<h1>Create a New Game</h1>
<form action="/game/create" method="POST">
    <label for="name">Game Name:</label>
    <input type="text" id="name" name="name" required>

    <label for="centerLat">Area Center (Latitude):</label>
    <input type="number" id="centerLat" name="centerLat" step="0.000001" required>

    <label for="centerLng">Area Center (Longitude):</label>
    <input type="number" id="centerLng" name="centerLng" step="0.000001" required>

    <label for="width">Area Width (meters):</label>
    <input type="number" id="width" name="width" required>

    <label for="height">Area Height (meters):</label>
    <input type="number" id="height" name="height" required>

    <div id="map" style="width: 100%; height: 400px;"></div>

    <button type="submit">Create Game</button>
</form>

<script>
  async function initMap() {
    const { Map } = await google.maps.importLibrary("maps");

    const map = new Map(document.getElementById("map"), {
      center: { lat: 0, lng: 0 },
      zoom: 2,
    });

    let marker;

    map.addListener("click", (e) => {
      const position = { lat: e.latLng.lat().toFixed(6), lng: e.latLng.lng().toFixed(6) };


      if (marker) {
        marker.setPosition(position);
      } else {
        marker = new google.maps.Marker({
          position,
          map: map,
        });
      }

      // Actualizar los campos del formulario con las coordenadas seleccionadas
      document.getElementById("centerLat").value = position.lat;
      document.getElementById("centerLng").value = position.lng;
    });
  }

  initMap();
</script>
<script async
    src="https://maps.googleapis.com/maps/api/js?key=<%=googleMapsApiKey
    %>&callback=initMap">
</script>
